<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getränke Zähler</title>
    <style>
        body { font-family: Arial, sans-serif; touch-action: manipulation; margin: 0; }
        .item { display: flex; align-items: center; justify-content: space-between; padding: 10px; border: 1px solid #ddd; }
        .info { flex-grow: 1; display: flex; align-items: center; }
        .name { font-size: 1.5em; font-weight: bold; margin-right: 10px; }
        .preis { font-size: 1.2em; }
        .counter { display: flex; align-items: center; }
        .counter span { margin: 0 10px; font-size: 1.5em; }
        .button { padding: 5px; border: none; color: white; cursor: pointer; font-size: 1em; border-radius: 5px; height: 40px; }
        .button.plus { background-color: #4CAF50; width: 180px; }
        .button.minus { background-color: #f44336; width: 180px; }
    </style>
</head>
<body>

<h1>Getränke Zähler</h1>
<button id="loadBtn">Laden</button>
<button id="saveBtn">Zwischenergebnis senden</button>
<button id="endBtn">Projekt beenden</button>

<div id="getraenke-container"></div>

<script>
// Beispielhafte Daten wie in getraenke.json simuliert
const getraenkeData = [
    { Name: "Helles Bier", Preis: "3.80" },
    { Name: "Weißbier", Preis: "3.80" }
];

// Funktion zum Rendern der Getränkeliste
function renderGetraenke(data) {
    const container = document.getElementById('getraenke-container');
    container.innerHTML = ''; // Clear previous content

    data.forEach((item, index) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'item';

        const infoDiv = document.createElement('div');
        infoDiv.className = 'info';
        
        const name = document.createElement('div');
        name.className = 'name';
        name.textContent = item.Name;

        const preis = document.createElement('div');
        preis.className = 'preis';
        preis.textContent = `€${item.Preis}`;
        
        infoDiv.appendChild(name);
        infoDiv.appendChild(preis);

        const counterDiv = document.createElement('div');
        counterDiv.className = 'counter';
        
        const count = document.createElement('span');
        count.className = 'count';
        count.textContent = '0';

        const plusButton = document.createElement('button');
        plusButton.className = 'button plus';
        plusButton.textContent = '+1';
        plusButton.onclick = () => count.textContent = parseInt(count.textContent) + 1;

        const minusButton = document.createElement('button');
        minusButton.className = 'button minus';
        minusButton.textContent = '-1';
        minusButton.onclick = () => count.textContent = Math.max(0, parseInt(count.textContent) - 1);

        counterDiv.appendChild(minusButton);
        counterDiv.appendChild(count);
        counterDiv.appendChild(plusButton);

        itemDiv.appendChild(infoDiv);
        itemDiv.appendChild(counterDiv);
        container.appendChild(itemDiv);
    });
}

// Funktion zum Speichern in localStorage
function saveData() {
    const counters = Array.from(document.querySelectorAll('.count')).map(count => count.textContent);
    localStorage.setItem('data', JSON.stringify(counters));
    alert("Zwischenergebnis gespeichert!");
}

// Funktion zum Laden aus localStorage
function loadData() {
    const savedData = JSON.parse(localStorage.getItem('data'));
    if (savedData) {
        document.querySelectorAll('.count').forEach((count, index) => {
            count.textContent = savedData[index] || '0';
        });
        alert("Daten geladen!");
    } else {
        renderGetraenke(getraenkeData);  // Initiales Rendern falls nichts in localStorage
    }
}

// Funktion zum Zurücksetzen der Daten
function endProject() {
    if (confirm("Wollen Sie das Projekt beenden?")) {
        localStorage.removeItem('data');  // Entfernt alle gespeicherten Daten
        document.getElementById('getraenke-container').innerHTML = ''; // Leert die Anzeige
        alert("Das Projekt wurde beendet und die Zähler wurden zurückgesetzt.");
    }
}

// Event Listeners für Buttons
document.getElementById('loadBtn').addEventListener('click', loadData);
document.getElementById('saveBtn').addEventListener('click', saveData);
document.getElementById('endBtn').addEventListener('click', endProject);
</script>

</body>
</html>
