<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Anzeige</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        .event-container {
            display: flex;
            flex-direction: column;
        }
        .room-row {
            display: flex;
            width: 100%;
        }
        .event-card {
            background-color: #ffffff;
            border: 1px solid #ccc;
            margin: 5px;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .third {
            flex: 1;
        }
        .full {
            flex: 3;
        }
    </style>
</head>
<body>

    <h1>Willkommen bei Alea Eco</h1>
    <div id="event-container" class="event-container"></div>

    <script>
        const events = [
            {
                "DATUM": "15.10.24",
                "VON": "08:00",
                "BIS": "17:00",
                "EVENT": "Vertriebstagung 2024",
                "KUNDE": "HIPP",
                "TAGUNGSRAUM": "ecoCentrum",
                "Raumteil": "1-3", 
                "BILD": "ecoCentrum.jpeg"
            },
            {
                "DATUM": "15.10.24",
                "VON": "09:00",
                "BIS": "12:00",
                "EVENT": "Marketing Workshop",
                "KUNDE": "BMW",
                "TAGUNGSRAUM": "ecoForum",
                "Raumteil": "1", 
                "BILD": "ecoForum.jpeg"
            },
            {
                "DATUM": "15.10.24",
                "VON": "13:00",
                "BIS": "15:00",
                "EVENT": "Projektbesprechung",
                "KUNDE": "Siemens",
                "TAGUNGSRAUM": "ecoPlenum",
                "Raumteil": "2", 
                "BILD": "ecoPlenum.jpeg"
            },
            {
                "DATUM": "15.10.24",
                "VON": "10:00",
                "EVENT": "Team-Meeting",
                "KUNDE": "Bosch",
                "TAGUNGSRAUM": "ecoRefugium",
                "Raumteil": "2-3", 
                "BILD": "ecoRefugium.jpeg"
            }
        ];

        const roomRows = {};

        // Organize events by room
        events.forEach(event => {
            const { TAGUNGSRAUM, Raumteil } = event;
            if (!roomRows[TAGUNGSRAUM]) {
                roomRows[TAGUNGSRAUM] = [];
            }
            roomRows[TAGUNGSRAUM].push(event);
        });

        // Create the display for each room
        Object.entries(roomRows).forEach(([room, events]) => {
            const roomRow = document.createElement('div');
            roomRow.classList.add('room-row');
            let sections = [null, null, null];

            events.forEach(event => {
                const { Raumteil } = event;
                const index = Raumteil === "1-3" ? 0 :
                              Raumteil === "1-2" ? 0 :
                              Raumteil === "2-3" ? 1 :
                              Raumteil === "1" ? 0 :
                              Raumteil === "2" ? 1 :
                              Raumteil === "3" ? 2 : -1;

                if (index !== -1) {
                    sections[index] = sections[index] ? sections[index] + 1 : 1; 
                }

                // Merge sections logic
                if (Raumteil === "1-2" && sections[0] && sections[1]) {
                    sections[0] = sections[1] = null; // Clear them for single display
                    const card = document.createElement('div');
                    card.classList.add('event-card', 'full');
                    card.innerHTML = `<strong>${event.KUNDE}</strong>: ${event.EVENT} (${event.VON} bis ${event.BIS})`;
                    roomRow.appendChild(card);
                } else if (Raumteil === "2-3" && sections[1] && sections[2]) {
                    sections[1] = sections[2] = null; // Clear them for single display
                    const card = document.createElement('div');
                    card.classList.add('event-card', 'full');
                    card.innerHTML = `<strong>${event.KUNDE}</strong>: ${event.EVENT} (${event.VON} bis ${event.BIS})`;
                    roomRow.appendChild(card);
                } else {
                    const card = document.createElement('div');
                    card.classList.add('event-card', 'third');
                    card.innerHTML = `<strong>${event.KUNDE}</strong>: ${event.EVENT} (${event.VON} bis ${event.BIS})`;
                    roomRow.appendChild(card);
                }
            });

            document.getElementById('event-container').appendChild(roomRow);
        });
    </script>

</body>
</html>
